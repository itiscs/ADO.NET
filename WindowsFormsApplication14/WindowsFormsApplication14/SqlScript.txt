CREATE TABLE [dbo].[TOVARY] (
    [KOD_TOVAR] INT             IDENTITY (1, 1) NOT NULL,
    [TOVAR]     VARCHAR (20)    NOT NULL,
    [ED_IZM]    VARCHAR (10)    NULL,
    [ZENA]      INT             DEFAULT ((0)) NULL,
    [COUNT_TOV] INT             DEFAULT ((0)) NULL,
    [PICTURE]   VARBINARY (MAX) NULL,
    CONSTRAINT [PK_TOVARY] PRIMARY KEY CLUSTERED ([KOD_TOVAR] ASC),
    CONSTRAINT [CH_ZENA] CHECK ([ZENA]>=(0))
);

CREATE TABLE [dbo].[POKUPATELI] (
    [KOD_POKUP] [dbo].[KEY_TYPE] IDENTITY (1, 1) NOT NULL,
    [POKUP]     VARCHAR (30)     NOT NULL,
    [GOROD]     VARCHAR (20)     DEFAULT ('') NULL,
    [ADRES]     VARCHAR (25)     DEFAULT ('') NULL,
    [TEL]       VARCHAR (10)     NULL,
    PRIMARY KEY CLUSTERED ([KOD_POKUP] ASC)
);

CREATE TABLE [dbo].[RASXOD] (
    [KOD_RASH]  [dbo].[KEY_TYPE] IDENTITY (1, 1) NOT NULL,
    [DATA_RASH] DATETIME         NOT NULL,
    [KOLVO]     INT              DEFAULT ((0)) NULL,
    [STOIM]     [dbo].[KEY_TYPE] NOT NULL,
    [KOD_TOVAR] [dbo].[KEY_TYPE] NOT NULL,
    [KOD_POKUP] [dbo].[KEY_TYPE] NOT NULL,
    CONSTRAINT [PK_RASXOD] PRIMARY KEY CLUSTERED ([KOD_RASH] ASC),
    CONSTRAINT [POK_RASH] FOREIGN KEY ([KOD_POKUP]) REFERENCES [dbo].[POKUPATELI] ([KOD_POKUP]) ON DELETE CASCADE ON UPDATE CASCADE,
    CONSTRAINT [TOV_RASH] FOREIGN KEY ([KOD_TOVAR]) REFERENCES [dbo].[TOVARY] ([KOD_TOVAR])
);


